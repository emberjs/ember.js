// Builders are created for each template the first time it is rendered.
// The builder walks through all statements, static and dynamic, and
// returns a result containing just the static statements with the
// dynamic morphs created for the statements. Subsequent rerenders
// can simply walk over the statements and apply them to the morphs.
export default class Builder {
    constructor(morph, frame) {
        this.frame = frame;
        this.parentMorph = morph;
        this.stack = new ElementStack({ builder: this, frame, morph });
        this.morphs = [];
    }
    morphList() {
        return this.morphs;
    }
    bounds() {
        return this.stack.bounds();
    }
    /// Interaction with ElementStack
    createMorph(Type, attrs, parentElement) {
        Type = Type.specialize(attrs);
        let morph = new Type(parentElement, this.frame);
        morph.init(attrs);
        this.morphs.push(morph);
        return morph;
    }
    /// Utilities
    render(statement) {
        let { stack, frame } = this;
        if (statement.isStatic) {
            statement.evaluate(stack);
            return;
        }
        //let syntaxExtension = _frame.syntaxExtension(statement);
        let content = statement.evaluate(stack, frame);
        content.append(stack);
    }
}
export class ElementStack {
    constructor({ builder, frame, morph }) {
        this.builder = builder;
        this.frame = frame;
        this.dom = frame.dom();
        this.morph = morph;
        this.operations = new TopLevelOperations(this);
        this.element = morph.parentNode;
        this.nextSibling = morph.nextSibling;
        this.elementStack = [morph.parentNode];
        this.nextSiblingStack = [morph.nextSibling];
        this.firstNode = null;
        this.lastNode = null;
    }
    bounds() {
        return {
            first: this.firstNode,
            last: this.lastNode,
            parent: this.element
        };
    }
    _pushElement(element) {
        this.elementStack.push(element);
        this.nextSiblingStack.push(null);
        this.element = element;
    }
    _popElement() {
        let { elementStack, nextSiblingStack } = this;
        let topElement = elementStack.pop();
        nextSiblingStack.pop();
        this.element = elementStack[elementStack.length - 1];
        this.nextSibling = nextSiblingStack[nextSiblingStack.length - 1];
        return topElement;
    }
    appendStatement(statement) {
        this.builder.render(statement);
    }
    createMorph(Type, attrs) {
        return this.builder.createMorph(Type, attrs, this.element);
    }
    appendMorph(Type, attrs) {
        this.createMorph(Type, attrs).append(this);
    }
    setAttribute(name, value) {
        this.dom.setAttribute(this.element, name, value);
    }
    setAttributeNS(name, value, namespace) {
        this.dom.setAttributeNS(this.element, name, value, namespace);
    }
    appendText(text) {
        this.operations.appendText(text);
    }
    _appendText(text) {
        let node = this.dom.createTextNode(text);
        this.dom.insertBefore(this.element, node, this.nextSibling);
        return node;
    }
    appendComment(comment) {
        this.operations.appendComment(comment);
    }
    _appendComment(comment) {
        let node = this.dom.createComment(comment);
        this.dom.insertBefore(this.element, node, this.nextSibling);
        return node;
    }
    openElement(tag) {
        this.operations.openElement(tag);
    }
    _openElement(tag) {
        let element = this.dom.createElement(tag, this.element);
        this._pushElement(element);
        return element;
    }
    closeElement() {
        this.operations.closeElement();
    }
    _closeElement() {
        let child = this._popElement();
        this.dom.insertBefore(this.element, child, this.nextSibling);
    }
    newNode(node) {
        if (!this.firstNode)
            this.firstNode = node;
        this.lastNode = node;
    }
}
class TopLevelOperations {
    constructor(stack) {
        this.stack = stack;
        this.nested = null;
    }
    appendText(text) {
        let node = this.stack._appendText(text);
        this._newNode(node);
    }
    appendComment(value) {
        let node = this.stack._appendComment(value);
        this._newNode(node);
    }
    openElement(tag) {
        let element = this.stack._openElement(tag);
        this._newNode(element);
        let nestedOperations = this.nested = this.nested || new NestedOperations(this.stack, this);
        this.stack.operations = nestedOperations;
        return element;
    }
    _newNode(node) {
        let stack = this.stack;
        if (!stack.firstNode)
            stack.firstNode = node;
        stack.lastNode = node;
    }
    closeElement() {
        throw new Error("BUG: Unbalanced open and close element");
    }
}
class NestedOperations {
    constructor(stack, topLevel) {
        this.level = 1;
        this.stack = stack;
        this.topLevel = topLevel;
    }
    appendText(text) {
        this.stack._appendText(text);
    }
    appendComment(value) {
        this.stack._appendComment(value);
    }
    openElement(tag) {
        this.level++;
        return this.stack._openElement(tag);
    }
    closeElement() {
        this.stack._closeElement();
        if (this.level === 1) {
            this.stack.operations = this.topLevel;
        }
        else {
            this.level--;
        }
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnVpbGRlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9odG1sYmFycy1ydW50aW1lL2xpYi9idWlsZGVyLnRzIl0sIm5hbWVzIjpbIkJ1aWxkZXIiLCJCdWlsZGVyLmNvbnN0cnVjdG9yIiwiQnVpbGRlci5tb3JwaExpc3QiLCJCdWlsZGVyLmJvdW5kcyIsIkJ1aWxkZXIuY3JlYXRlTW9ycGgiLCJCdWlsZGVyLnJlbmRlciIsIkVsZW1lbnRTdGFjayIsIkVsZW1lbnRTdGFjay5jb25zdHJ1Y3RvciIsIkVsZW1lbnRTdGFjay5ib3VuZHMiLCJFbGVtZW50U3RhY2suX3B1c2hFbGVtZW50IiwiRWxlbWVudFN0YWNrLl9wb3BFbGVtZW50IiwiRWxlbWVudFN0YWNrLmFwcGVuZFN0YXRlbWVudCIsIkVsZW1lbnRTdGFjay5jcmVhdGVNb3JwaCIsIkVsZW1lbnRTdGFjay5hcHBlbmRNb3JwaCIsIkVsZW1lbnRTdGFjay5zZXRBdHRyaWJ1dGUiLCJFbGVtZW50U3RhY2suc2V0QXR0cmlidXRlTlMiLCJFbGVtZW50U3RhY2suYXBwZW5kVGV4dCIsIkVsZW1lbnRTdGFjay5fYXBwZW5kVGV4dCIsIkVsZW1lbnRTdGFjay5hcHBlbmRDb21tZW50IiwiRWxlbWVudFN0YWNrLl9hcHBlbmRDb21tZW50IiwiRWxlbWVudFN0YWNrLm9wZW5FbGVtZW50IiwiRWxlbWVudFN0YWNrLl9vcGVuRWxlbWVudCIsIkVsZW1lbnRTdGFjay5jbG9zZUVsZW1lbnQiLCJFbGVtZW50U3RhY2suX2Nsb3NlRWxlbWVudCIsIkVsZW1lbnRTdGFjay5uZXdOb2RlIiwiVG9wTGV2ZWxPcGVyYXRpb25zIiwiVG9wTGV2ZWxPcGVyYXRpb25zLmNvbnN0cnVjdG9yIiwiVG9wTGV2ZWxPcGVyYXRpb25zLmFwcGVuZFRleHQiLCJUb3BMZXZlbE9wZXJhdGlvbnMuYXBwZW5kQ29tbWVudCIsIlRvcExldmVsT3BlcmF0aW9ucy5vcGVuRWxlbWVudCIsIlRvcExldmVsT3BlcmF0aW9ucy5fbmV3Tm9kZSIsIlRvcExldmVsT3BlcmF0aW9ucy5jbG9zZUVsZW1lbnQiLCJOZXN0ZWRPcGVyYXRpb25zIiwiTmVzdGVkT3BlcmF0aW9ucy5jb25zdHJ1Y3RvciIsIk5lc3RlZE9wZXJhdGlvbnMuYXBwZW5kVGV4dCIsIk5lc3RlZE9wZXJhdGlvbnMuYXBwZW5kQ29tbWVudCIsIk5lc3RlZE9wZXJhdGlvbnMub3BlbkVsZW1lbnQiLCJOZXN0ZWRPcGVyYXRpb25zLmNsb3NlRWxlbWVudCJdLCJtYXBwaW5ncyI6IkFBSUEsd0VBQXdFO0FBQ3hFLG9FQUFvRTtBQUNwRSxrRUFBa0U7QUFDbEUsa0VBQWtFO0FBQ2xFLG9FQUFvRTtBQUNwRTtJQU1FQSxZQUFZQSxLQUFLQSxFQUFFQSxLQUFLQTtRQUN0QkMsSUFBSUEsQ0FBQ0EsS0FBS0EsR0FBR0EsS0FBS0EsQ0FBQ0E7UUFFbkJBLElBQUlBLENBQUNBLFdBQVdBLEdBQUdBLEtBQUtBLENBQUNBO1FBQ3pCQSxJQUFJQSxDQUFDQSxLQUFLQSxHQUFHQSxJQUFJQSxZQUFZQSxDQUFDQSxFQUFFQSxPQUFPQSxFQUFFQSxJQUFJQSxFQUFFQSxLQUFLQSxFQUFFQSxLQUFLQSxFQUFFQSxDQUFDQSxDQUFDQTtRQUMvREEsSUFBSUEsQ0FBQ0EsTUFBTUEsR0FBR0EsRUFBRUEsQ0FBQ0E7SUFDbkJBLENBQUNBO0lBRURELFNBQVNBO1FBQ1BFLE1BQU1BLENBQUNBLElBQUlBLENBQUNBLE1BQU1BLENBQUNBO0lBQ3JCQSxDQUFDQTtJQUVERixNQUFNQTtRQUNKRyxNQUFNQSxDQUFDQSxJQUFJQSxDQUFDQSxLQUFLQSxDQUFDQSxNQUFNQSxFQUFFQSxDQUFDQTtJQUM3QkEsQ0FBQ0E7SUFFREgsaUNBQWlDQTtJQUVqQ0EsV0FBV0EsQ0FBQ0EsSUFBSUEsRUFBRUEsS0FBS0EsRUFBRUEsYUFBYUE7UUFDcENJLElBQUlBLEdBQUdBLElBQUlBLENBQUNBLFVBQVVBLENBQUNBLEtBQUtBLENBQUNBLENBQUNBO1FBQzlCQSxJQUFJQSxLQUFLQSxHQUFHQSxJ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
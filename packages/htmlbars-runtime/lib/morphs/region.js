import { Morph } from '../morph';
/**

The Region family of morphs handle syntaxes that could theoretically represent multiple nodes.

TextMorph: manages a single text node, updates via .nodeValue
SingleNodeMorph: manages a single node, updated via .removeChild and insertBefore
MultiNodeMorph: manages a first and last node, updated by clearing and starting over

Region.specialize returns one of the three variants

Before .update(), we first call .guard()

.guard()

TextMorph fails the guard if the .value() of the reference is no longer text
SingleNodeMorph fails the guard if the .value() of the reference is HTML

The guard() method is responsible for cleaning itself up and returning
nextSibling.
*/
class Region extends Morph {
    init(options) {
        inner.init(options);
    }
    append() {
        let insertion = this.innerMorph();
        this._inner.append();
    }
    update() {
        this.render();
    }
    insert(insertion) {
    }
}
class TextMorph extends Morph {
    init({ reference }) {
        this._reference = reference;
        this._node = null;
    }
    append() {
        let dom = this._frame.dom();
        let node = this._node = dom.createTextNode(this._reference.value());
        dom.appendChild(this.parentNode, node);
    }
    update() {
        let { _node } = this;
        _node.nodeValue = this._reference.value();
    }
}
class SingleNodeMorph extends Morph {
    init({ reference }) {
        this._reference = reference;
        this._node = null;
    }
    append() {
        let dom = this._frame.dom();
        let node = this._node = this._reference.value();
        dom.appendChild(this.parentNode, node);
    }
    update() {
        let dom = this._frame.dom();
        let { _node } = this;
        let newNode = this._node = this._reference.value();
        dom.insertBefore(this.parentNode, newNode, _node);
        _node.parentNode.removeChild(_node);
    }
}
class HTMLMorph extends Morph {
    init({ reference }) {
        this._reference = reference;
        this._first = null;
        this._last = null;
    }
    append() {
        let { _frame, _reference, parentNode } = this;
        let dom = _frame.dom;
        let { first, last } = dom.appendHTMLBefore(parentNode, null, _reference.value());
        this._first = first;
        this._last = last;
    }
    update() {
        let { parentNode, _frame, _reference, _first, _last } = this;
        let dom = _frame.dom;
        let { first, last } = dom.appendHTMLBefore(parentNode, _first, _reference.value());
        this._first = first;
        this._last = last;
        clear(parentNode, _first, _last);
    }
}
class BlockMorph extends Morph {
    init({ reference }) {
        this._reference = reference;
        this._lastResult = null;
    }
    append() {
        this._lastResult = this._reference.value().evaluate(this, this._frame);
    }
    update() {
        this._lastResult.renderTemplate(this._reference.value());
    }
}
function clear(parent, first, last) {
    let node = first;
    while (node) {
        let next = node.nextSibling;
        parent.removeChild(node);
        if (node === last)
            return;
        node = next;
    }
}
// this file is shared between inline and block
export class HtmlInsertion {
    constructor(string) {
        this._string = string;
        this._first = null;
        this._last = null;
    }
    equal(other) {
        return this._string === other._string;
    }
    append(dom, parentNode, nextSibling) {
        let { first, last } = dom.appendHTMLBefore(parentNode, nextSibling, this._string);
        this._first = first;
        this._last = last;
    }
    replace() {
    }
}
export class TextInsertion {
    constructor(string) {
        this._string = string;
        this._node = null;
    }
    equal(other) {
        return this._string === other._string;
    }
    append(dom, parentNode, nextSibling) {
        let text = dom.createTextNode(this._string);
        dom.insertBefore(parentNode, text, nextSibling);
        this._node = text;
        return { first: text, last: text };
    }
    replace(insertion) {
        let newString = insertion._string;
        if (this._string === newString)
            return;
        this._node.nodeValue = this._string = newString;
    }
}
export class NodeInsertion {
    constructor(node) {
        this._node = node;
    }
    equal() {
        return false; // for now, if this is an important use-case we can establish heuristics
    }
    append(dom, parentNode, nextSibling) {
        let _node = this._node;
        dom.insertBefore(parentNode, _node, nextSibling);
        return { first: _node, last: _node };
    }
}
export class EmptyInsertion {
    equal() {
        return true;
    }
    append(dom, parentNode, nextSibling) {
        let comment = dom.createComment('');
        dom.insertBefore(parentNode, comment, nextSibling);
        return { first: comment, last: comment };
    }
}
export class BlockInsertion {
    constructor(template, morph) {
        this._template = template;
        this._morph = morph;
        this._lastResult = null;
    }
    append() {
        let result = this._lastResult = this._template.evaluate(this._morph, this._morph._frame);
        return { first: result.bounds.first, last: result.bounds.last };
    }
    replace(insertion) {
        this._lastResult = this._lastResult.renderTemplate(insertion._template);
    }
}
export class AppendingRegion {
    constructor({ dom, parentNode, morph }) {
        this._dom = dom;
        this._parentNode = parentNode;
        this._morph = morph;
    }
    replace(insertion) {
        let { first, last } = insertion.append(this._dom, this._parentNode, null);
        let { _dom, _parentNode } = this;
        this._morph._region = new UpdatingRegion({ first, last, lastInsertion: insertion, dom: _dom, parentNode: _parentNode });
    }
    renderTemplate(template, morph) {
        let insertion = new BlockInsertion(template, morph);
        this.replace(insertion);
    }
}
export class UpdatingRegion {
    constructor({ dom, lastInsertion, parentNode, first, last }) {
        this._dom = dom;
        this._parentNode = parentNode;
        this._lastResult = null;
        this._first = first;
        this._last = last;
        this._lastInsertion = lastInsertion;
    }
    replace(insertion) {
        let { _lastInsertion } = this;
        if (insertion instanceof _lastInsertion.constructor && _lastInsertion.replace) {
            _lastInsertion.replace(insertion);
        }
        else {
            let { first, last } = insertion.append(this._dom, this._parentNode, this._clear());
            this._lastInsertion = insertion;
            this._first = first;
            this._last = last;
        }
    }
    renderTemplate(template, morph) {
        let insertion = new BlockInsertion(template, morph);
        this.replace(insertion);
    }
    _clear() {
        let { _first, _last, _parentNode } = this;
        let node = _first;
        while (node) {
            let next = node.nextSibling;
            _parentNode.removeChild(node);
            if (node === _last)
                return next;
            node = next;
        }
        return null;
    }
}
export class RegionMorph extends Morph {
    init() {
        this._region = new AppendingRegion({ dom: this._frame.dom(), parentNode: this.parentNode, morph: this });
        this.isDynamic = true;
    }
    append() {
        this.render();
    }
    update() {
        this.render();
    }
    renderTemplate(template) {
        this._region.renderTemplate(template, this, this._frame);
    }
    render() {
        throw new Error("Not implemented: render() for subclass of RegionMorph");
    }
    replace(insertion) {
        this._region.replace(insertion);
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVnaW9uLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL2h0bWxiYXJzLXJ1bnRpbWUvbGliL21vcnBocy9yZWdpb24udHMiXSwibmFtZXMiOlsiUmVnaW9uIiwiUmVnaW9uLmluaXQiLCJSZWdpb24uYXBwZW5kIiwiUmVnaW9uLnVwZGF0ZSIsIlJlZ2lvbi5pbnNlcnQiLCJUZXh0TW9ycGgiLCJUZXh0TW9ycGguaW5pdCIsIlRleHRNb3JwaC5hcHBlbmQiLCJUZXh0TW9ycGgudXBkYXRlIiwiU2luZ2xlTm9kZU1vcnBoIiwiU2luZ2xlTm9kZU1vcnBoLmluaXQiLCJTaW5nbGVOb2RlTW9ycGguYXBwZW5kIiwiU2luZ2xlTm9kZU1vcnBoLnVwZGF0ZSIsIkhUTUxNb3JwaCIsIkhUTUxNb3JwaC5pbml0IiwiSFRNTE1vcnBoLmFwcGVuZCIsIkhUTUxNb3JwaC51cGRhdGUiLCJCbG9ja01vcnBoIiwiQmxvY2tNb3JwaC5pbml0IiwiQmxvY2tNb3JwaC5hcHBlbmQiLCJCbG9ja01vcnBoLnVwZGF0ZSIsImNsZWFyIiwiSHRtbEluc2VydGlvbiIsIkh0bWxJbnNlcnRpb24uY29uc3RydWN0b3IiLCJIdG1sSW5zZXJ0aW9uLmVxdWFsIiwiSHRtbEluc2VydGlvbi5hcHBlbmQiLCJIdG1sSW5zZXJ0aW9uLnJlcGxhY2UiLCJUZXh0SW5zZXJ0aW9uIiwiVGV4dEluc2VydGlvbi5jb25zdHJ1Y3RvciIsIlRleHRJbnNlcnRpb24uZXF1YWwiLCJUZXh0SW5zZXJ0aW9uLmFwcGVuZCIsIlRleHRJbnNlcnRpb24ucmVwbGFjZSIsIk5vZGVJbnNlcnRpb24iLCJOb2RlSW5zZXJ0aW9uLmNvbnN0cnVjdG9yIiwiTm9kZUluc2VydGlvbi5lcXVhbCIsIk5vZGVJbnNlcnRpb24uYXBwZW5kIiwiRW1wdHlJbnNlcnRpb24iLCJFbXB0eUluc2VydGlvbi5lcXVhbCIsIkVtcHR5SW5zZXJ0aW9uLmFwcGVuZCIsIkJsb2NrSW5zZXJ0aW9uIiwiQmxvY2tJbnNlcnRpb24uY29uc3RydWN0b3IiLCJCbG9ja0luc2VydGlvbi5hcHBlbmQiLCJCbG9ja0luc2VydGlvbi5yZXBsYWNlIiwiQXBwZW5kaW5nUmVnaW9uIiwiQXBwZW5kaW5nUmVnaW9uLmNvbnN0cnVjdG9yIiwiQXBwZW5kaW5nUmVnaW9uLnJlcGxhY2UiLCJBcHBlbmRpbmdSZWdpb24ucmVuZGVyVGVtcGxhdGUiLCJVcGRhdGluZ1JlZ2lvbiIsIlVwZGF0aW5nUmVnaW9uLmNvbnN0cnVjdG9yIiwiVXBkYXRpbmdSZWdpb24ucmVwbGFjZSIsIlVwZGF0aW5nUmVnaW9uLnJlbmRlclRlbXBsYXRlIiwiVXBkYXRpbmdSZWdpb24uX2NsZWFyIiwiUmVnaW9uTW9ycGgiLCJSZWdpb25Nb3JwaC5pbml0IiwiUmVnaW9uTW9ycGguYXBwZW5kIiwiUmVnaW9uTW9ycGgudXBkYXRlIiwiUmVnaW9uTW9ycGgucmVuZGVyVGVtcGxhdGUiLCJSZWdpb25Nb3JwaC5yZW5kZXIiLCJSZWdpb25Nb3JwaC5yZXBsYWNlIl0sIm1hcHBpbmdzIjoiT0FBTyxFQUFFLEtBQUssRUFBRSxNQUFNLFVBQVU7QUFFaEM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7RUFtQkU7QUFFRixxQkFBcUIsS0FBSztJQUN4QkEsSUFBSUEsQ0FBQ0EsT0FBT0E7UUFDVkMsS0FBS0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsT0FBT0EsQ0FBQ0EsQ0FBQ0E7SUFDdEJBLENBQUNBO0lBRURELE1BQU1BO1FBQ0pFLElBQUlBLFNBQVNBLEdBQUdBLElBQUlBLENBQUNBLFVBQVVBLEVBQUVBLENBQUNBO1FBQ2xDQSxJQUFJQSxDQUFDQSxNQUFNQSxDQUFDQSxNQUFNQSxFQUFFQSxDQUFDQTtJQUN2QkEsQ0FBQ0E7SUFFREYsTUFBTUE7UUFDSkcsSUFBSUEsQ0FBQ0EsTUFBTUEsRUFBRUEsQ0FBQ0E7SUFDaEJBLENBQUNBO0lBRURILE1BQU1BLENBQUNBLFNBQVNBO0lBRWhCSSxDQUFDQTtBQUNISixDQUFDQTtBQUVELHdCQUF3QixLQUFLO0lBQzNCSyxJQUFJQSxDQUFDQSxFQUFFQSxTQUFTQSxFQUFFQTtRQUNoQkMsSUFBSUEsQ0FBQ0EsVUFBVUEsR0FBR0EsU0FBU0EsQ0FBQ0E7UUFDNUJBLElBQUlBLENBQUNBLEtBQUtBLEdBQUdBLElBQUlBLENBQUNBO0lBQ3BCQSxDQUFDQTtJQUVERCxNQUFNQTtRQUNKRSxJQUFJQSxHQUFHQSxHQUFHQSxJQUFJQSxDQUFDQSxNQUFNQSxDQUFDQSxHQUFHQSxFQUFFQSxDQUFDQTtRQUM1QkEsSUFBSUEsSUFBSUEsR0FBR0EsSUFBSUEsQ0FBQ0EsS0FBS0EsR0FBR0EsR0FBR0EsQ0FBQ0EsY0FBY0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsVUFBVUEsQ0FBQ0EsS0FBS0EsRUFBRUEsQ0FBQ0EsQ0FBQ0E7UUFDcEVBLEdBQUdBLENBQUNBLFdBQVdBLENBQUNBLElBQUlBLENBQUNBLFVBQVVBLEVBQUVBLElBQUlBLENBQUNBLENBQUNBO0lBQ3pDQSxDQUFDQTtJQUVERixNQUFNQTtRQUNKRyxJQUFJQSxFQUFFQSxLQUFLQSxFQUFFQSxHQUFHQSxJQUFJQSxDQUFDQTtRQUNyQkEsS0FBS0EsQ0FBQ0EsU0FBU0EsR0FBR0EsSUFBSUEsQ0FBQ0EsVUFBVUEsQ0FBQ0EsS0FBS0EsRUFBRUEsQ0FBQ0E7SUFDNUNBLENBQUNBO0FBQ0hILENBQUNBO0FBRUQsOEJBQThCLEtBQUs7SUFDakNJLElBQUlBLENBQUNBLEVBQUVBLFNBQVNBLEVBQUVBO1FBQ2hCQyxJQUFJQSxDQUFDQSxVQUFVQSxHQUFHQSxTQUFTQSxDQUFDQTtRQUM1QkEsSUFBSUEsQ0FBQ0EsS0FBS0EsR0FBR0EsSUFBSUEsQ0FBQ0E7SUFDcEJBLENBQUNBO0lBRURELE1BQU1BO1FBQ0pFLElBQUlBLEdBQUdBLEdBQUdBLElBQUlBLENBQUNBLE1BQU1BLENBQUNBLEdBQUdBLEVBQUVBLENBQUNBO1FBQzVCQSxJQUFJQSxJQUFJQSxHQUFHQSxJQUFJQSxDQUFDQSxLQUFLQSxHQUFHQSxJQUFJQSxDQUFDQSxVQUFVQSxDQUFDQSxLQUFLQSxFQUFFQSxDQUFDQTtRQUNoREEsR0FBR0Es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
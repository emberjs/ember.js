import { voidMap } from 'htmlbars-util';
import { TemplateBuilder } from './template';
import { clear } from './morph';
export class RenderResult {
    constructor(options) {
        let { morph, locals, morphs, bounds, template } = options;
        this.morph = morph;
        this.morphs = morphs;
        this.bounds = bounds;
        this.template = template;
    }
    parentNode() {
        return this.bounds.parentNode();
    }
    firstNode() {
        return this.bounds.firstNode();
    }
    lastNode() {
        return this.bounds.lastNode();
    }
    renderTemplate(template) {
        if (template === this.template) {
            this.rerender();
            return this;
        }
        else {
            this.morph.nextSibling = clear(this);
            let result = template.evaluate(this.morph, this.morph.frame);
            this.morph.nextSibling = null;
            return result;
        }
    }
    rerender() {
        this.morphs.forEach(morph => morph.update());
    }
}
export function manualElement(tagName, attributes, _isEmpty) {
    let b = new TemplateBuilder();
    b.openElement(tagName);
    for (let key in attributes) {
        if (typeof attributes[key] === 'string') {
            b.staticAttr(key, attributes[key]);
        }
        else {
            b.dynamicAttr(key, b.specExpr(attributes[key]));
        }
    }
    let isEmpty = _isEmpty || voidMap[tagName];
    if (!isEmpty) {
        b.inline('yield');
    }
    b.closeElement();
    return b.template();
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVuZGVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL2h0bWxiYXJzLXJ1bnRpbWUvbGliL3JlbmRlci50cyJdLCJuYW1lcyI6WyJSZW5kZXJSZXN1bHQiLCJSZW5kZXJSZXN1bHQuY29uc3RydWN0b3IiLCJSZW5kZXJSZXN1bHQucGFyZW50Tm9kZSIsIlJlbmRlclJlc3VsdC5maXJzdE5vZGUiLCJSZW5kZXJSZXN1bHQubGFzdE5vZGUiLCJSZW5kZXJSZXN1bHQucmVuZGVyVGVtcGxhdGUiLCJSZW5kZXJSZXN1bHQucmVyZW5kZXIiLCJtYW51YWxFbGVtZW50Il0sIm1hcHBpbmdzIjoiT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLGVBQWU7T0FDdEIsRUFBRSxlQUFlLEVBQUUsTUFBTSxZQUFZO09BQy9DLEVBQTRCLEtBQUssRUFBRSxNQUFNLFNBQVM7QUFXekQ7SUFNRUEsWUFBWUEsT0FBNEJBO1FBQ3RDQyxJQUFJQSxFQUFFQSxLQUFLQSxFQUFFQSxNQUFNQSxFQUFFQSxNQUFNQSxFQUFFQSxNQUFNQSxFQUFFQSxRQUFRQSxFQUFFQSxHQUFHQSxPQUFPQSxDQUFDQTtRQUUxREEsSUFBSUEsQ0FBQ0EsS0FBS0EsR0FBR0EsS0FBS0EsQ0FBQ0E7UUFDbkJBLElBQUlBLENBQUNBLE1BQU1BLEdBQUdBLE1BQU1BLENBQUNBO1FBQ3JCQSxJQUFJQSxDQUFDQSxNQUFNQSxHQUFHQSxNQUFNQSxDQUFDQTtRQUNyQkEsSUFBSUEsQ0FBQ0EsUUFBUUEsR0FBR0EsUUFBUUEsQ0FBQ0E7SUFDM0JBLENBQUNBO0lBRURELFVBQVVBO1FBQ1JFLE1BQU1BLENBQUNBLElBQUlBLENBQUNBLE1BQU1BLENBQUNBLFVBQVVBLEVBQUVBLENBQUNBO0lBQ2xDQSxDQUFDQTtJQUVERixTQUFTQTtRQUNQRyxNQUFNQSxDQUFDQSxJQUFJQSxDQUFDQSxNQUFNQSxDQUFDQSxTQUFTQSxFQUFFQSxDQUFDQTtJQUNqQ0EsQ0FBQ0E7SUFFREgsUUFBUUE7UUFD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
import { ConstReference, PathReference, Reference } from 'glimmer-reference';

export class PrimitiveReference extends ConstReference<any> implements PathReference {
  get(): PathReference {
    return NULL_REFERENCE;
  }
}

export class ConditionalReference implements Reference {
  private inner: Reference;

  constructor(inner: Reference) {
    this.inner = inner;
  }

  value() {
    return this.toBool(this.inner.value());
  }

  protected toBool(value: any): boolean {
    return !!value;
  }

  isDirty() { return this.inner.isDirty(); }

  destroy() { return this.inner.destroy(); }
}

export const NULL_REFERENCE = new PrimitiveReference(null);
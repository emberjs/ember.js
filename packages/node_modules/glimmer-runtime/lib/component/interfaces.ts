import { InternedString, Slice } from 'glimmer-util';

import {
  Templates,
  Args
} from '../syntax/core';

import {
  EvaluatedNamedArgs,
} from '../compiled/expressions/args';

import {
  Attribute as AttributeSyntax
} from '../syntax';

import { Layout } from '../compiled/blocks';
import { ComponentParts } from '../compiler';

import { VM } from '../vm';

import Environment from '../environment';
import SymbolTable from '../symbol-table';

export interface Component {};
export interface ComponentClass {};

export interface ComponentManager<T extends Component> {
  create(definition: ComponentDefinition<T>, attrs: EvaluatedNamedArgs): T;
  didCreate(component: T);

  update(component: T, attrs: EvaluatedNamedArgs);
  didUpdate(component: T);

  getSelf(component: T): any;
}

export abstract class ComponentDefinition<T extends Component> {
  public name: string; // for debugging
  public manager: ComponentManager<T>;
  public ComponentClass: ComponentClass;
  public layout: Layout;

  constructor(name: string, manager: ComponentManager<T>, ComponentClass: ComponentClass, layout: Layout) {
    this.name = name;
    this.manager = manager;
    this.ComponentClass = ComponentClass;
    this.layout = layout;
  }

  abstract compile(options: { layout: Layout, env: Environment, symbolTable: SymbolTable }): ComponentParts;
}
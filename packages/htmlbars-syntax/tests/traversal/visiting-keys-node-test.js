import { parse, traverse } from '../../htmlbars-syntax';
function traversalEqual(node, expectedTraversal) {
    let actualTraversal = [];
    traverse(node, {
        All: {
            enter(node) { actualTraversal.push(['enter', node]); },
            exit(node) { actualTraversal.push(['exit', node]); },
            keys: {
                All: {
                    enter(node, key) { actualTraversal.push([`enter:${key}`, node]); },
                    exit(node, key) { actualTraversal.push([`exit:${key}`, node]); },
                }
            }
        }
    });
    deepEqual(actualTraversal.map(a => `${a[0]} ${a[1].type}`), expectedTraversal.map(a => `${a[0]} ${a[1].type}`));
    let nodesEqual = true;
    for (let i = 0; i < actualTraversal.length; i++) {
        if (actualTraversal[i][1] !== expectedTraversal[i][1]) {
            nodesEqual = false;
            break;
        }
    }
    ok(nodesEqual, "Actual nodes match expected nodes");
}
QUnit.module('[htmlbars-syntax] Traversal - visiting keys');
test('Blocks', function () {
    let ast = parse(`{{#block param1 param2 key1=value key2=value}}<b></b><b></b>{{/block}}`);
    traversalEqual(ast, [
        ['enter', ast],
        ['enter:body', ast],
        ['enter', ast.body[0]],
        ['enter:path', ast.body[0]],
        ['enter', ast.body[0].path],
        ['exit', ast.body[0].path],
        ['exit:path', ast.body[0]],
        ['enter:params', ast.body[0]],
        ['enter', ast.body[0].params[0]],
        ['exit', ast.body[0].params[0]],
        ['enter', ast.body[0].params[1]],
        ['exit', ast.body[0].params[1]],
        ['exit:params', ast.body[0]],
        ['enter:hash', ast.body[0]],
        ['enter', ast.body[0].hash],
        ['enter:pairs', ast.body[0].hash],
        ['enter', ast.body[0].hash.pairs[0]],
        ['enter:value', ast.body[0].hash.pairs[0]],
        ['enter', ast.body[0].hash.pairs[0].value],
        ['exit', ast.body[0].hash.pairs[0].value],
        ['exit:value', ast.body[0].hash.pairs[0]],
        ['exit', ast.body[0].hash.pairs[0]],
        ['enter', ast.body[0].hash.pairs[1]],
        ['enter:value', ast.body[0].hash.pairs[1]],
        ['enter', ast.body[0].hash.pairs[1].value],
        ['exit', ast.body[0].hash.pairs[1].value],
        ['exit:value', ast.body[0].hash.pairs[1]],
        ['exit', ast.body[0].hash.pairs[1]],
        ['exit:pairs', ast.body[0].hash],
        ['exit', ast.body[0].hash],
        ['exit:hash', ast.body[0]],
        ['enter:program', ast.body[0]],
        ['enter', ast.body[0].program],
        ['enter:body', ast.body[0].program],
        ['enter', ast.body[0].program.body[0]],
        ['enter:attributes', ast.body[0].program.body[0]],
        ['exit:attributes', ast.body[0].program.body[0]],
        ['enter:modifiers', ast.body[0].program.body[0]],
        ['exit:modifiers', ast.body[0].program.body[0]],
        ['enter:children', ast.body[0].program.body[0]],
        ['exit:children', ast.body[0].program.body[0]],
        ['exit', ast.body[0].program.body[0]],
        ['enter', ast.body[0].program.body[1]],
        ['enter:attributes', ast.body[0].program.body[1]],
        ['exit:attributes', ast.body[0].program.body[1]],
        ['enter:modifiers', ast.body[0].program.body[1]],
        ['exit:modifiers', ast.body[0].program.body[1]],
        ['enter:children', ast.body[0].program.body[1]],
        ['exit:children', ast.body[0].program.body[1]],
        ['exit', ast.body[0].program.body[1]],
        ['exit:body', ast.body[0].program],
        ['exit', ast.body[0].program],
        ['exit:program', ast.body[0]],
        ['exit', ast.body[0]],
        ['exit:body', ast],
        ['exit', ast]
    ]);
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmlzaXRpbmcta2V5cy1ub2RlLXRlc3QuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvaHRtbGJhcnMtc3ludGF4L3Rlc3RzL3RyYXZlcnNhbC92aXNpdGluZy1rZXlzLW5vZGUtdGVzdC50cyJdLCJuYW1lcyI6WyJ0cmF2ZXJzYWxFcXVhbCIsInRyYXZlcnNhbEVxdWFsLmVudGVyIiwidHJhdmVyc2FsRXF1YWwuZXhpdCJdLCJtYXBwaW5ncyI6Ik9BQU8sRUFBRSxLQUFLLEVBQUUsUUFBUSxFQUFFLE1BQU0sdUJBQXVCO0FBRXZELHdCQUF3QixJQUFJLEVBQUUsaUJBQWlCO0lBQzdDQSxJQUFJQSxlQUFlQSxHQUFHQSxFQUFFQSxDQUFDQTtJQUV6QkEsUUFBUUEsQ0FBQ0EsSUFBSUEsRUFBRUE7UUFDYkEsR0FBR0EsRUFBRUE7WUFDSEEsS0FBS0EsQ0FBQ0EsSUFBSUEsSUFBSUMsZUFBZUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsQ0FBQ0EsT0FBT0EsRUFBRUEsSUFBSUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFDdERELElBQUlBLENBQUNBLElBQUlBLElBQUlFLGVBQWVBLENBQUNBLElBQUlBLENBQUNBLENBQUNBLE1BQU1BLEVBQUdBLElBQUlBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLENBQUNBO1lBQ3JERixJQUFJQSxFQUFFQTtnQkFDSkEsR0FBR0EsRUFBRUE7b0JBQ0hBLEtBQUtBLENBQUNBLElBQUlBLEVBQUVBLEdBQUdBLElBQUlDLGVBQWVBLENBQUNBLElBQUlBLENBQUNBLENBQUNBLFNBQVNBLEdBQUdBLEVBQUVBLEVBQUVBLElBQUlBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLENBQUNBO29CQUNsRUQsSUFBSUEsQ0FBQ0EsSUFBSUEsRUFBRUEsR0FBR0EsSUFBSUUsZUFBZUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsQ0FBQ0EsUUFBUUEsR0FBR0EsRUFBRUEsRUFBR0EsSUFBSUEsQ0FBQ0EsQ0FBQ0Es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LENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQztRQUN0QyxDQUFDLGFBQWEsRUFBTyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQztRQUN0QyxDQUFDLE9BQU8sRUFBYSxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDL0MsQ0FBQyxhQUFhLEVBQU8sR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQy9DLENBQUMsT0FBTyxFQUFhLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUM7UUFDckQsQ0FBQyxNQUFNLEVBQWMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQztRQUNyRCxDQUFDLFlBQVksRUFBUSxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDL0MsQ0FBQyxNQUFNLEVBQWMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQy9DLENBQUMsT0FBTyxFQUFhLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUMvQyxDQUFDLGFBQWEsRUFBTyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDL0MsQ0FBQyxPQUFPLEVBQWEsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJ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
import { metaFor } from '../meta';
export class PropertyReference {
    constructor(object, property) {
        this._object = object;
        this._property = property;
    }
    isDirty() { return true; }
    value() { return this._object[this._property]; }
    label() {
        return '[reference Property]';
    }
}
export function ComputedBlueprint(property, dependencies) {
    return class ComputedReference {
        constructor(object, property) {
            this._object = object;
            this._property = property;
            this._internedDependencies = dependencies;
            this._isDirty = true;
            this._sources = null;
        }
        value() {
            if (!this._disconnect) {
                let root = metaFor(this._object).root();
                this._disconnect = new Array(this._internedDependencies.length);
                this._internedDependencies.forEach((path, i) => {
                    this._disconnect[i] = root.referenceFromInternedParts(path).chain(this);
                });
            }
            return this._object[this._property];
        }
        label() {
            return '[reference Computed]';
        }
        destroy() {
            this._disconnect.forEach(chain => chain.destroy());
        }
    }
    ;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVzY3JpcHRvcnMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvaHRtbGJhcnMtcmVmZXJlbmNlL2xpYi9yZWZlcmVuY2VzL2Rlc2NyaXB0b3JzLnRzIl0sIm5hbWVzIjpbIlByb3BlcnR5UmVmZXJlbmNlIiwiUHJvcGVydHlSZWZlcmVuY2UuY29uc3RydWN0b3IiLCJQcm9wZXJ0eVJlZmVyZW5jZS5pc0RpcnR5IiwiUHJvcGVydHlSZWZlcmVuY2UudmFsdWUiLCJQcm9wZXJ0eVJlZmVyZW5jZS5sYWJlbCIsIkNvbXB1dGVkQmx1ZXByaW50IiwiQ29tcHV0ZWRCbHVlcHJpbnQuY29uc3RydWN0b3IiLCJDb21wdXRlZEJsdWVwcmludC52YWx1ZSIsIkNvbXB1dGVkQmx1ZXByaW50LmxhYmVsIiwiQ29tcHV0ZWRCbHVlcHJpbnQuZGVzdHJveSJdLCJtYXBwaW5ncyI6Ik9BQU8sRUFBRSxPQUFPLEVBQUUsTUFBTSxTQUFTO0FBRWpDO0lBQ0VBLFlBQVlBLE1BQU1BLEVBQUVBLFFBQVFBO1FBQzFCQyxJQUFJQSxDQUFDQSxPQUFPQSxHQUFHQSxNQUFNQSxDQUFDQTtRQUN0QkEsSUFBSUEsQ0FBQ0EsU0FBU0EsR0FBR0EsUUFBUUEsQ0FBQ0E7SUFDNUJBLENBQUNBO0lBRURELE9BQU9BLEtBQUtFLE1BQU1BLENBQUNBLElBQUlBLENBQUNBLENBQUNBLENBQUNBO0lBQzFCRixLQUFLQSxLQUFLRyxNQUFNQSxDQUFDQSxJQUFJQSxDQUFDQSxPQUFPQSxDQUFDQSxJQUFJQSxDQUFDQSxTQUFTQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQTtJQUVoREgsS0FBS0E7UUFDSEksTUFBTUEsQ0FBQ0Esc0JBQXNCQSxDQUFDQTtJQUNoQ0EsQ0FBQ0E7QUFDSEosQ0FBQ0E7QUFFRCxrQ0FBa0MsUUFBUSxFQUFFLFlBQVk7SUFDdERLLE1BQU1BLENBQUNBO1FBQ0xBLFlBQVlBLE1BQU1BLEVBQUVBLFFBQVFBO1lBQzFCQyxJQUFJQSxDQUFDQSxPQUFPQSxHQUFHQSxNQUFNQSxDQUFDQTtZQUN0QkEsSUFBSUEsQ0FBQ0EsU0FBU0EsR0FBR0EsUUFBUUEsQ0FBQ0E7WUFDMUJBLElBQUlBLENBQUNBLHFCQUFxQkEsR0FBR0EsWUFBWUEsQ0FBQ0E7WUFDMUNBLElBQUlBLENBQUNBLFFBQVFBLEdBQUdBLElBQUlBLENBQUNBO1lBQ3JCQSxJQUFJQSxDQUFDQSxRQUFRQSxHQUFHQSxJQUFJQSxDQUFDQTtRQUN2QkEsQ0FBQ0E7UUFFREQsS0FBS0E7WUFDSEUsRUFBRUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsV0FBV0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7Z0JBQ3RCQSxJQUFJQSxJQUFJQSxHQUFHQSxPQUFPQSxDQUFDQSxJQUFJQSxDQUFDQSxPQUFPQSxDQUFDQSxDQUFDQSxJQUFJQSxFQUFFQSxDQUFDQTtnQkFDeENBLElBQUlBLENBQUNBLFdBQVdBLEdBQUdBLElBQUlBLEtBQUtBLENBQUNBLElBQUlBLENBQUNBLHFCQUFxQkEsQ0FBQ0EsTUFBTUEsQ0FBQ0EsQ0FBQ0E7Z0JBRWhFQSxJQUFJQSxDQUFDQSxxQkFBcUJBLENBQUNBLE9BQU9BLENBQUNBLENBQUNBLElBQUlBLEVBQUVBLENBQUNBO29CQUN6Q0EsSUFBSUEsQ0FBQ0EsV0FBV0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsSUFBSUEsQ0FBQ0EsMEJBQTBCQSxDQUFDQSxJQUFJQSxDQUFDQSxDQUFDQSxLQUFLQSxDQUFDQSxJQUFJQSxDQUFDQSxDQUFDQTtnQkFDMUVBLENBQUNBLENBQUNBLENBQUNBO1lBQ0xBLENBQUNBO1lBRURBLE1BQU1BLENBQUNBLElBQUlBLENBQUNBLE9BQU9BLENBQUNBLElBQUlBLENBQUNBLFNBQVNBLENBQUNBLENBQUNBO1FBQ3RDQSxDQUFDQTtRQUVERixLQUFLQTtZQUNIRyxNQUFNQSxDQUFDQSxzQkFBc0JBLENBQUNBO1FBQ2hDQSxDQUFDQTtRQUVESCxPQUFPQTtZQUNMSSxJQUFJQSxDQUFDQSxXQUFXQSxDQUFDQSxPQUFPQSxDQUFDQSxLQUFLQSxJQUFJQSxLQUFLQSxDQUFDQSxPQUFPQSxFQUFFQSxDQUFDQSxDQUFDQTtRQUNyREEsQ0FBQ0E7SUFDSEosQ0FBQ0E7SUFBQUEsQ0FBQ0E7QUFDSkEsQ0FBQ0EifQ==
import { guid } from '../utils';
export default class ForkedReference {
    constructor(reference) {
        this._reference = reference;
        this._guid = guid();
        this._dirty = true;
        this._chain = reference.chain(this);
    }
    notify() {
        this._dirty = true;
    }
    isDirty() {
        return this._dirty;
    }
    value() {
        this._dirty = false;
        return this._reference.value();
    }
    destroy() {
        this._chain.destroy();
    }
    label() {
        return '[reference Leaf]';
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZm9ya2VkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL2h0bWxiYXJzLXJlZmVyZW5jZS9saWIvcmVmZXJlbmNlcy9mb3JrZWQudHMiXSwibmFtZXMiOlsiRm9ya2VkUmVmZXJlbmNlIiwiRm9ya2VkUmVmZXJlbmNlLmNvbnN0cnVjdG9yIiwiRm9ya2VkUmVmZXJlbmNlLm5vdGlmeSIsIkZvcmtlZFJlZmVyZW5jZS5pc0RpcnR5IiwiRm9ya2VkUmVmZXJlbmNlLnZhbHVlIiwiRm9ya2VkUmVmZXJlbmNlLmRlc3Ryb3kiLCJGb3JrZWRSZWZlcmVuY2UubGFiZWwiXSwibWFwcGluZ3MiOiJPQUFPLEVBQUUsSUFBSSxFQUFFLE1BQU0sVUFBVTtBQUUvQjtJQUNFQSxZQUFZQSxTQUFTQTtRQUNuQkMsSUFBSUEsQ0FBQ0EsVUFBVUEsR0FBR0EsU0FBU0EsQ0FBQ0E7UUFDNUJBLElBQUlBLENBQUNBLEtBQUtBLEdBQUdBLElBQUlBLEVBQUVBLENBQUNBO1FBQ3BCQSxJQUFJQSxDQUFDQSxNQUFNQSxHQUFHQSxJQUFJQSxDQUFDQTtRQUVuQkEsSUFBSUEsQ0FBQ0EsTUFBTUEsR0FBR0EsU0FBU0EsQ0FBQ0EsS0FBS0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsQ0FBQ0E7SUFDdENBLENBQUNBO0lBRURELE1BQU1BO1FBQ0pFLElBQUlBLENBQUNBLE1BQU1BLEdBQUdBLElBQUlBLENBQUNBO0lBQ3JCQSxDQUFDQTtJQUVERixPQUFPQTtRQUNMRyxNQUFNQSxDQUFDQSxJQUFJQSxDQUFDQSxNQUFNQSxDQUFDQTtJQUNyQkEsQ0FBQ0E7SUFFREgsS0FBS0E7UUFDSEksSUFBSUEsQ0FBQ0EsTUFBTUEsR0FBR0EsS0FBS0EsQ0FBQ0E7UUFDcEJBLE1BQU1BLENBQUNBLElBQUlBLENBQUNBLFVBQVVBLENBQUNBLEtBQUtBLEVBQUVBLENBQUNBO0lBQ2pDQSxDQUFDQTtJQUVESixPQUFPQTtRQUNMSyxJQUFJQSxDQUFDQSxNQUFNQSxDQUFDQSxPQUFPQSxFQUFFQSxDQUFDQTtJQUN4QkEsQ0FBQ0E7SUFFREwsS0FBS0E7UUFDSE0sTUFBTUEsQ0FBQ0Esa0JBQWtCQSxDQUFDQTtJQUM1QkEsQ0FBQ0E7QUFDSE4sQ0FBQ0E7QUFBQSJ9